# What is VCS(Version Control System)
- VCS는 파일 변화를 시간에 따라 기록했다가 나중에 특정 시점의 버전을 다시 꺼내올 수 있는 시스템

  - 각 파일을 이전 상태로 되돌릴 수 있고,
  - 프로젝트를 통째로 이전 상태로 되돌릴 수 있고,
  - 시간에 따라 수정 내용을 비교해 볼 수 있고,
  - 누가 문제를 일으켰는지도 추적할 수 있고,
  - 누가 언제 만들어낸 이슈인지도 알 수 있다. 

## 분산 버전 관리 시스템 (Distributed VCS)
- 클라이언트는 단순히 파일의 마지막 스냅샷을 체크아웃하지 않음
- 저장소 자체를 히스토리와 더불어 전부 복제
- 서버에 문제가 생기면 이 복제물로 다시 작업 가능
- 클라이언트 중에서 아무거나 골라도 서버 복원 가능
- `Clone`은 데이터를 가진 진정한 백업
- 대부분의 DVCS 환경에서는 원격 저장소가 존재

<img src="./img/distributed.png" width="700">

***
# Git 기초

## 차이가 아니라 스냅샷
- SVN과 깃은 큰 차이점은 데이터를 다루는 방법
- SVN 등의 시스템은 각 파일의 변화를 시간순으로 관리하며 파일의 집합을 관리  
  <img src="./img/deltas.png" width="700">

- 깃은 데이터를 파일 시스템 스냅샷의 연속으로 취급하고 크기가 아주 작음
- 깃은 커밋하거나 프로젝트의 상태를 저장할 때마다 파일이 존재하는 그 순간을 중요하게 여김
- 파일이 달라지지 않았으면 깃은 성능을 위해 파일을 새로 저장하지 않음
- 다만 이전 상태의 파일에 대한 링크만 저장
- 깃은 데이터를 **스냅샷의 스트림**처럼 취급  
  <img src="./img/snapshots.png" width="700">

## 로컬 커맨드
- 거의 모든 명령이 로컬 파일과 데이터만 사용
- 프로젝트의 모든 히스토리가 로컬 디스크에 있기 떄문에 모든 명령이 바로 실행
- 파일을 조회하기 위해 서버에 접근할 필요가 없음

## Git의 무결성
- 깃은 데이터를 저장하기 전에 항상 체크섬을 구하고 그 체크섬으로 데이터를 관리
- 체크섬을 이해하는 깃 없이는 파일, 디렉토리를 변경, 조회할 수 없음

- CheckSum
  - 깃은 SHA-1 Hash를 사용하여 체크섬을 만듦
  - 40자 길이의 16진수 문자열
  ```
  # ex)
  24b9da6552252987aa493b52f8696cd6d3b00373
  ```
  - 파일의 내용이나 디렉토리 구조를 이용해 체크섬을 구함
  - 실제로 깃은 파일을 이름으로 저장하지 않고 해당 파일의 해시로 저장

## Git의 데이터 추가
- 깃으로 작업을 하면 깃 데이터베이스에 데이터가 **추가**될 뿐
- 일단 커밋하면 데이터를 잃어버리기 힘듦

## 세 가지 상태
- 깃은 파일을 **Committed, Modified, Staged** 세 가지로 분류
  1. Committed : 데이터가 로컬(깃) 데이터베이스에 안전하게 저장됨
  2. Modified : 수정한 파일을 아직 로컬(깃) 데이터베이스에 커밋하지 않은 상태
  3. Staged : 현재 수정한 파일을 곧 커밋할 것이라고 표시한 상태

## 세 가지 단계
- 위의 세 가지 상태는 깃의 세 가지 단계(깃 디렉토리, 워킹 트리, 스테이징 에리어)와 관계가 있음
  1. Git Directory(`.git` 디렉토리) : 깃이 프로젝트의 메타데이터와 객체 데이터베이스를 저장하는 곳
      - 깃의 핵심, `Clone`시 깃 디렉토리가 생성됨

  2. Working Tree/Directory : 프로젝트의 특정 버전을 체크아웃한 것
      - 로컬 디스크에 있는 깃 디렉토리 내부의 압축된 데이터베이스에서 파일을 가져와 워킹 트리 생성

  3. Staging Area : 깃 디렉토리에 존재하며 곧 커밋할 파일에 대한 정보를 저장하는 단순한 파일
      - 깃의 기술용오로 'Index'라고도 불림

<img src="./img/areas.png" width="700">

- 깃에서 실제 동작 과정
  1. 워킹 트리에서 파일을 수정
  2. 수정한 파일을 스테이징 에리어로 Stage해서 커밋할 '스냅샷'을 만듦
  3. 스테이징 에리어에 있는 파일들을 커밋해서 깃 디렉토리에 영구적 스냅샷으로 저장

- 깃 디렉토리에 있는 파일들은 Committed 상태
- 파일을 수정하고 스테이징 에리어에 추가했다면 Staged 상태
- 체크아웃하고 나서 수정했지만 아직 스테이징 에리어에 추가하지 않았으면 Modified 상태